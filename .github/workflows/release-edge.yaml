name: Release to Edge

on:
  workflow_dispatch: {}
  push:
    branches:
      - main

jobs:
  # TODO remove the "artifact: k8s_artifact" arg from the reusable `release-charm` workflow
  release-k8s:
    # TODO: add conditional: only if common/ or k8s/ changed
    uses: canonical/observability/.github/workflows/release-charm.yaml@main
    secrets: inherit
    with:
      charm-path: "k8s"
  release-machine:
    # TODO: add conditional: only if common/ or machine/ changed
    uses: canonical/observability/.github/workflows/release-charm.yaml@main
    secrets: inherit
    with:
      charm-path: "machine"
